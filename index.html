<html>

<head>
	<script type="text/javascript">
//utils
	

	var counter = function(text){
		return text.length;
	}

	var rate = function(numero){
		if (numero % 2 == 0){
			return 0;//p
		}else{
			return 1;//ip		
		}
	}

	var retro =function(text){
		var back = '';
		for (var i = text.length-1; i >= 0; i--) {
			back=back+text[i];
		};
		return back;
	}

	

	var shake = function(model){

		var character = '';
		
		model.forEach(function(obj){
			var text = obj.a;
			if(obj.c===1){
				var mid = Math.ceil(obj.b/2);
				var textMid = text.substring(mid-1,mid);
				var part1 = text.substring(0,mid-1);
				var part2 = text.substring(mid,text.length);

				character = character + retro(part2)+textMid+retro(part1)+' ';
								
			}else{
				var p = obj.b/2;
				var part1 = text.substring(0,p);
				var part2 = text.substring(p,text.length);	
				character = character + retro(part2)+retro(part1)+' ';	
			}
		});

		return character; 
	}

//fns
	var chaos = function(text){
		var divide = text.split(" ");
		var model = [];

		divide.forEach(function(element){
			model.push({
				a:element,
				b:counter(element),
				c:rate(counter(element))
			})
		});

		console.log(shake(model));

	}

//main

	var parser = function(text,chaos){
		chaos(text);
	}

//scope

	var insert=function(){
		var text = document.getElementById('text').value;

		parser(text,chaos);
		
	}

	</script>
</head>
<body>
	
	<textarea id="text" onkeyup="insert()"></textarea>

</body>	

</html>